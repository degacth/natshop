// Generated by CoffeeScript 1.9.2
(function() {
  angular.module('Catalog').factory('Cart', function(CATALOG_API_URL, $resource) {
    return $resource(CATALOG_API_URL + "/cart/:product", {
      product: "@id"
    });
  }).service('Carter', function() {
    return (function() {
      function _Class(cart) {
        this.cart = cart;
      }

      _Class.prototype.set = function(cart_data) {
        var index;
        if (-1 < (index = this.get_index(cart_data.id))) {
          return this.cart[index].count = cart_data.count;
        } else {
          return this.cart.push(cart_data);
        }
      };

      _Class.prototype.remove = function(product) {
        return this.cart.splice(this.cart.indexOf(product), 1);
      };

      _Class.prototype.get_index = function(id) {
        return this.cart.indexOf(_.find(this.cart, function(c) {
          return c.id === id;
        }));
      };

      return _Class;

    })();
  });

}).call(this);

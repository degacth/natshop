{% extends 'admin/change_list.html' %}
{% load staticfiles common %}

{% block content %}
    <div ng-app="ParsersApp" class="uk-form" ng-controller="YamController">
        <div class="uk-grid uk-grid-width-1-2">
            <div ng-controller="ParsedCatalogs">
                <select ng-model="url" ng-change="load(url)">
                    <option value="">Выберите сайт</option>
                    {% for url in cl.result_list %}
                        <option value="{{ url.url }}">{{ url.title }}</option>
                    {% endfor %}
                </select>
                <button type="button" class="uk-button uk-button-primary uk-width-1-6">
                    <i class="uk-icon-chevron-right"></i>
                </button>

                <hr>

                <div class="uk-panel uk-panel-box">
                    <a ng-href="{{ site_url }}" class="uk-panel-title" ng-bind="site_name"></a>
                    <catalog-tree></catalog-tree>
                </div>
            </div>

            <div ng-controller="LocalCatalogs">
                <button type="button" class="uk-button uk-button-success uk-width-1-6">
                    <i class="uk-icon-plus"></i>
                </button>
                <button type="button" class="uk-button uk-button-danger uk-width-1-2 uk-text-left" ng-show="current_catalog">
                    <i class="uk-icon-remove"></i>
                    <span ng-bind="current_catalog.title"></span>
                </button>

                <hr>

                <div class="uk-panel uk-panel-box">
                    <a class="uk-panel-title" ng-bind="site_name"></a>
                    <catalog-tree></catalog-tree>
                </div>
            </div>
        </div>

        <hr>

        <ul>
            <li ng-repeat="product in all_products.parsed" ng-bind="product.title"></li>
        </ul>
    </div>
{% endblock %}

{% block stylesheets %}
    {{ block.super }}
    {{ media.css }}

    <link rel="stylesheet" href="{% static 'vendor/uikit/css/uikit.almost-flat.min.css' %}"/>
{% endblock %}

{% block javascripts %}
    {% include 'includes/ng_config.html' %}

    <script src="{% static 'vendor/underscore/underscore-min.js' %}"></script>
    <script src="{% static 'js/_mixin.js' %}"></script>
    <script src="{% static 'vendor/angular/angular.min.js' %}"></script>
    <script src="{% static 'vendor/angular-resource/angular-resource.min.js' %}"></script>
    <script src="{% static 'vendor/x2js/xml2json.min.js' %}"></script>
    <script src="{% static 'vendor/angular-xml/angular-xml.min.js' %}"></script>
    <script src="{% static 'parsers/js/ParsersApp.js' %}"></script>
    <script src="{% static 'parsers/js/YamController.js' %}"></script>
{% endblock %}

{% block content_title %}{% endblock %}
{% block object-tools %}{% endblock %}
{% extends 'admin/change_list.html' %}
{% load staticfiles %}

{% block content %}
    <div ng-app="ParsersApp" class="uk-form" ng-controller="YamController">
        <div class="uk-grid uk-grid-width-1-2">
            <div ng-controller="ParsedCatalogs">
                <div class="uk-form-controls">
                    <form ng-submit="url_form.$valid && load(url.value)" novalidate name="url_form">
                        <input type="text" ng-model="url.value" required />

                        <button type="submit" class="uk-button uk-width-1-6">
                            <i class="uk-icon-search"></i>
                        </button>

                        <button type="button" class="uk-button uk-width-1-6">
                            <i class="uk-icon-chevron-right"></i>
                        </button>
                    </form>
                </div>
                <hr>
                <div class="uk-panel uk-panel-box">
                    <a ng-href="{{ site_url }}" class="uk-panel-title" ng-bind="site_name"></a>
                    <catalog-tree></catalog-tree>
                </div>
            </div>

            <div ng-controller="LocalCatalogs">
                <button type="button" class="uk-button uk-button-danger uk-width-1-2 uk-text-left" ng-show="current_catalog">
                    <i class="uk-icon-remove"></i>
                    <span ng-bind="current_catalog.title"></span>
                </button>

                <hr>

                <div class="uk-panel uk-panel-box">
                    <p class="uk-panel-title" ng-bind="site_name"></p>
                    <catalog-tree></catalog-tree>
                </div>
            </div>
        </div>

        <hr>
    </div>
{% endblock %}

{% block stylesheets %}
    {{ block.super }}
    {{ media.css }}

    <link rel="stylesheet" href="{% static 'vendor/uikit/css/uikit.almost-flat.min.css' %}"/>
{% endblock %}

{% block javascripts %}
    {% include 'includes/ng_config.html' %}

    <script src="{% static 'vendor/underscore/underscore-min.js' %}"></script>
    <script src="{% static 'js/_mixin.js' %}"></script>
    <script src="{% static 'vendor/angular/angular.min.js' %}"></script>
    <script src="{% static 'vendor/angular-resource/angular-resource.min.js' %}"></script>
    <script src="{% static 'vendor/x2js/xml2json.min.js' %}"></script>
    <script src="{% static 'vendor/angular-xml/angular-xml.min.js' %}"></script>
    <script src="{% static 'parsers/js/ParsersApp.js' %}"></script>
    <script src="{% static 'parsers/js/YamController.js' %}"></script>
{% endblock %}

{% block content_title %}{% endblock %}
{% block object-tools %}{% endblock %}